"use strict";(self.webpackChunkverilog_learning_platform_client=self.webpackChunkverilog_learning_platform_client||[]).push([[440],{620:(e,t,o)=>{o.r(t),o.d(t,{default:()=>C});var n,l=o(65043),s=o(31517),a=o(80726),r=o.n(a),c=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(c)}const d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const u=function(e){return"string"===typeof e&&d.test(e)};for(var m=[],p=0;p<256;++p)m.push((p+256).toString(16).substr(1));const g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]).toLowerCase();if(!u(o))throw TypeError("Stringified UUID is invalid");return o};const x=function(e,t,o){var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){o=o||0;for(var l=0;l<16;++l)t[o+l]=n[l];return t}return g(n)};var h=o(86213),b=o(73216),f=o(62770),v=o(37709),y=(o(18340),o(8729)),j=o(70579);v.A.registerLanguage("verilog",o(87888));const C=()=>{const e=(0,b.Zp)(),t=(0,l.useContext)(y.Ay);(0,l.useEffect)((()=>{t.user&&"verigeektech@gmail.com"!=t.user.email&&e("/")}),[t.user]);const[o,n]=(0,l.useState)([]),a=(0,b.Zp)(),[c,i]=(0,l.useState)(""),[d,u]=(0,l.useState)({id:x(),title:"",description:"",estimatedTime:"",completed:!1,sections:[{id:x(),title:"",content:"",contentBlocks:[]}],codeExamples:[{id:x(),title:"",description:"",code:"",explanation:""}]});(0,l.useEffect)((()=>{h.A.post(`${f.A}/api/modules/get-modules`).then((e=>{e.data.success&&n(e.data.modules)})).catch((e=>{console.error("Failed to fetch modules:",e)}))}),[]),(0,l.useEffect)((()=>{document.querySelectorAll("pre code").forEach((e=>{v.A.highlightBlock(e)}))}));const m=(e,t,o)=>{const n=[...d.sections];n[e][t]=o,u({...d,sections:n})},p=(e,t,o)=>{const n=[...d.codeExamples];n[e][t]=o,u({...d,codeExamples:n})},g={toolbar:["heading","|","fontFamily","fontSize","|","bold","italic","underline","strikethrough","|","link","bulletedList","numberedList","|","blockQuote","insertTable","codeBlock","|","undo","redo"],codeBlock:{languages:[{language:"plaintext",label:"Plain text"},{language:"javascript",label:"JavaScript"},{language:"python",label:"Python"},{language:"verilog",label:"Verilog"},{language:"html",label:"HTML"},{language:"css",label:"CSS"}]},image:{insert:{integrations:["insertImageViaUrl"]},toolbar:["imageTextAlternative","imageStyle:full","imageStyle:side"]},removePlugins:["ImageUpload","EasyImage"]},C=e=>{let t=e.content||"";return e.contentBlocks&&e.contentBlocks.length>0&&e.contentBlocks.forEach((e=>{"content"===e.type?t+=e.content||"":"code"===e.type&&(t+=`\n            <pre><code class="language-${e.language}">\n${e.code}\n            </code></pre>\n          `)})),t};return(0,j.jsxs)("div",{className:"max-w-5xl mx-auto p-6 bg-white shadow-xl rounded-lg",children:[(0,j.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Add Chapter to Module"}),(0,j.jsxs)("div",{className:"mb-6",children:[(0,j.jsx)("label",{className:"block text-gray-600 mb-2 font-semibold",children:"Select Module"}),(0,j.jsxs)("select",{value:c,onChange:e=>i(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",children:[(0,j.jsx)("option",{value:"",children:"-- Select a Module --"}),o.map((e=>(0,j.jsxs)("option",{value:e.id,children:[e.title," \u2013 ",e.description.split(" ").slice(0,20).join(" "),e.description.split(" ").length>50?"...":""]},e.id)))]})]}),c&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("input",{type:"text",placeholder:"Chapter Title",value:d.title,onChange:e=>u({...d,title:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg mb-4"}),(0,j.jsx)("textarea",{placeholder:"Chapter Description",value:d.description,onChange:e=>u({...d,description:e.target.value}),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg mb-4"}),(0,j.jsx)("input",{type:"text",placeholder:"Estimated Time (e.g., 1 hour)",value:d.estimatedTime,onChange:e=>u({...d,estimatedTime:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg mb-6"}),d.sections.map(((e,t)=>(0,j.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-5 mb-6",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,j.jsxs)("h2",{className:"text-xl font-semibold text-gray-700",children:["Section ",t+1]}),d.sections.length>1&&(0,j.jsx)("button",{onClick:()=>(e=>{const t=d.sections.filter(((t,o)=>o!==e));u({...d,sections:t})})(t),className:"text-red-500 hover:underline text-sm",children:"Delete"})]}),(0,j.jsx)("input",{type:"text",placeholder:"Section Title",value:e.title,onChange:e=>m(t,"title",e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg mb-4"}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("h3",{className:"text-md font-medium text-gray-600 mb-2",children:"Main Content"}),(0,j.jsx)(s.aF,{editor:r(),data:e.content||"",onChange:(e,o)=>((e,t,o)=>{const n=o.getData();m(e,"content",n)})(t,0,o),config:g})]}),e.contentBlocks&&e.contentBlocks.map(((e,o)=>(0,j.jsxs)("div",{className:"mt-4 mb-4 bg-white p-4 border border-gray-200 rounded",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,j.jsx)("h4",{className:"text-md font-medium text-gray-600",children:"content"===e.type?"Additional Content":"Code Block"}),(0,j.jsx)("button",{onClick:()=>((e,t)=>{const o=[...d.sections];o[e].contentBlocks.splice(t,1),u({...d,sections:o})})(t,o),className:"text-red-500 hover:underline text-sm",children:"Delete"})]}),"content"===e.type?(0,j.jsx)(s.aF,{editor:r(),data:e.content||"",onChange:(e,n)=>((e,t,o,n)=>{const l=n.getData(),s=[...d.sections];s[e].contentBlocks[t].content=l,u({...d,sections:s})})(t,o,0,n),config:g}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"mb-2",children:(0,j.jsxs)("select",{value:e.language||"javascript",onChange:e=>((e,t,o)=>{const n=[...d.sections];n[e].contentBlocks[t].language=o,u({...d,sections:n})})(t,o,e.target.value),className:"border border-gray-300 rounded p-1",children:[(0,j.jsx)("option",{value:"javascript",children:"JavaScript"}),(0,j.jsx)("option",{value:"python",children:"Python"}),(0,j.jsx)("option",{value:"verilog",children:"Verilog"}),(0,j.jsx)("option",{value:"html",children:"HTML"}),(0,j.jsx)("option",{value:"css",children:"CSS"}),(0,j.jsx)("option",{value:"plaintext",children:"Plain Text"})]})}),(0,j.jsx)("textarea",{value:e.code||"",onChange:e=>((e,t,o)=>{const n=[...d.sections];n[e].contentBlocks[t].code=o,u({...d,sections:n})})(t,o,e.target.value),className:"w-full p-2 font-mono text-sm border border-gray-300 rounded-lg bg-gray-50",rows:6,placeholder:"Enter code here..."})]})]},e.id))),(0,j.jsxs)("div",{className:"flex gap-2 mt-3 mb-3",children:[(0,j.jsx)("button",{onClick:()=>(e=>{const t=[...d.sections];t[e].contentBlocks||(t[e].contentBlocks=[]),t[e].contentBlocks.push({id:x(),type:"content",content:""}),u({...d,sections:t})})(t),className:"bg-green-50 text-green-600 font-medium px-3 py-1 rounded-md border border-green-200 hover:bg-green-100",children:"+ Add More Content"}),(0,j.jsx)("button",{onClick:()=>(e=>{const t=[...d.sections];t[e].contentBlocks||(t[e].contentBlocks=[]),t[e].contentBlocks.push({id:x(),type:"code",language:"javascript",code:""}),u({...d,sections:t})})(t),className:"bg-purple-50 text-purple-600 font-medium px-3 py-1 rounded-md border border-purple-200 hover:bg-purple-100",children:"+ Add Code"})]}),(e.content||e.contentBlocks&&e.contentBlocks.length>0)&&(0,j.jsxs)("div",{className:"mt-6",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Preview:"}),(0,j.jsx)("div",{className:"prose prose-sm max-w-none bg-white p-4 border border-gray-200 rounded  text-[1.2rem]",dangerouslySetInnerHTML:{__html:C(e)}})]})]},e.id))),(0,j.jsx)("div",{className:"flex items-center mb-8",children:(0,j.jsx)("button",{onClick:()=>{u({...d,sections:[...d.sections,{id:x(),title:"",content:"",contentBlocks:[]}]})},className:"bg-blue-50 text-blue-600 font-medium px-4 py-2 rounded-lg border border-blue-200 hover:bg-blue-100",children:"+ Add Section"})}),(0,j.jsxs)("div",{className:"mt-8",children:[(0,j.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"Code Examples (For Chapter)"}),d.codeExamples.map(((e,t)=>(0,j.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-white shadow",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,j.jsxs)("h4",{className:"text-md font-semibold",children:["Example ",t+1]}),(0,j.jsx)("button",{onClick:()=>(e=>{const t=d.codeExamples.filter(((t,o)=>o!==e));u({...d,codeExamples:t})})(t),className:"text-sm text-red-500 hover:underline",children:"Delete"})]}),(0,j.jsx)("input",{type:"text",placeholder:"Title",value:e.title,onChange:e=>p(t,"title",e.target.value),className:"w-full p-2 mb-2 border rounded"}),(0,j.jsx)("textarea",{placeholder:"Description",value:e.description,onChange:e=>p(t,"description",e.target.value),rows:2,className:"w-full p-2 mb-2 border rounded"}),(0,j.jsx)("textarea",{placeholder:"Code",value:e.code,onChange:e=>p(t,"code",e.target.value),rows:4,className:"w-full p-2 font-mono text-sm mb-2 border rounded bg-gray-100"}),(0,j.jsx)("textarea",{placeholder:"Explanation",value:e.explanation,onChange:e=>p(t,"explanation",e.target.value),rows:2,className:"w-full p-2 mb-2 border rounded"})]},e.id))),(0,j.jsx)("button",{onClick:()=>{const e=[...d.codeExamples,{id:x(),title:"",description:"",code:"",explanation:""}];u({...d,codeExamples:e})},className:"text-sm text-blue-600 border border-blue-200 px-3 py-1 rounded hover:bg-blue-50",children:"+ Add Code Example"})]}),(0,j.jsx)("div",{className:"flex justify-end mt-8",children:(0,j.jsx)("button",{onClick:async()=>{if(!c)return alert("Please select a module first!");const e=JSON.parse(JSON.stringify(d));e.sections=e.sections.map((e=>{let t=e.content||"";return e.contentBlocks&&e.contentBlocks.length>0&&e.contentBlocks.forEach((e=>{"content"===e.type?t+=e.content||"":"code"===e.type&&(t+=`\n              <pre><code class="language-${e.language}">\n  ${e.code}\n              </code></pre>\n            `)})),{id:e.id,title:e.title,content:t}}));const t={moduleId:c,id:e.id,title:e.title,description:e.description,estimatedTime:e.estimatedTime,completed:e.completed,codeExamples:e.codeExamples,sections:e.sections};try{console.log("Sending payload:",t);await h.A.post(`${f.A}/api/modules/upload-chapter`,t,{headers:{"Content-Type":"application/json"}});alert("Chapter uploaded successfully"),a("/ckeditor")}catch(s){var o,n,l;console.log(s),null!==s&&void 0!==s&&null!==(o=s.response)&&void 0!==o&&null!==(n=o.data)&&void 0!==n&&null!==(l=n.error)&&void 0!==l&&l.message?alert(s.response.data.error.message):alert(s)}},className:"bg-blue-600 text-white px-5 py-2 rounded-lg font-semibold hover:bg-blue-700",children:"Upload Chapter as JSON"})})]})]})}}}]);
//# sourceMappingURL=440.1a66aa8b.chunk.js.map