"use strict";(self.webpackChunkverilog_learning_platform_client=self.webpackChunkverilog_learning_platform_client||[]).push([[542],{84298:(e,t,r)=>{r.r(t),r.d(t,{default:()=>de});var n=r(65043),o=r(73216),s=r(35475),i=r(86213),l=r(96446),a=r(81637),c=r(85865),d=r(11906),u=r(60295),h=r(39336),x=r(35721),p=r(71322),m=r(48734),g=r(17392),v=r(22698),j=r(43845),A=r(63336),f=r(67784),b=r(51787),y=r(40794),C=r(14194),S=r(98606),I=r(93287),k=r(87332),w=r(45278),E=r(83560),z=r(91794),$=r(37141),B=r(33752),q=r(32782),N=r(81140),T=r(20916),M=r(80638),_=r(20905),W=r(13766),F=r(86605),O=r(40710),R=r(68903),D=r(12110),J=r(2828),H=r(36591),L=r(53193),P=r(57972),V=r(74605),Q=r(16374),Y=r(58293),U=r(85225),X=r(84593),Z=r(91989),G=r(59506),K=r(15337),ee=r(78994);const te=(e,t,r)=>{try{const n=`chapter-${e}-${t}`;return localStorage.setItem(n,r.toString()),re(e),!0}catch(n){return console.error("Error updating chapter progress:",n),!1}},re=e=>{try{const t=Object.keys(localStorage).filter((t=>t.startsWith(`chapter-${e}-`)));if(0===t.length)return 0;const r=t.filter((e=>"true"===localStorage.getItem(e))).length,n=Math.round(r/t.length*100);return localStorage.setItem(`module-progress-${e}`,n.toString()),n}catch(t){return console.error("Error updating module progress:",t),0}},ne=(e,t)=>{try{const r=`chapter-${e}-${t}`;return"true"===localStorage.getItem(r)}catch(r){return console.error("Error getting chapter progress:",r),!1}};var oe=r(70579);const se=e=>{var t,r;let{chapter:o,moduleId:i,onQuizCompletion:a,onNextChapter:u}=e;const[h]=(0,s.ok)(),[x,p]=(0,n.useState)(null),[m,g]=(0,n.useState)({}),[v,f]=(0,n.useState)(!1),[b,S]=(0,n.useState)([]),[I,k]=(0,n.useState)(0),[w,E]=(0,n.useState)({}),[z,$]=(0,n.useState)(!1),[N,T]=(0,n.useState)(""),[M,_]=(0,n.useState)("content"),[re,ne]=(0,n.useState)(0),[se,ie]=(0,n.useState)(!1),le=Boolean(o.quiz&&o.quiz.questions&&o.quiz.questions.length>0||o.questions&&o.questions.length>0),ae=o.quiz&&o.quiz.questions?o.quiz.questions:o.questions?o.questions:[],ce=(null===(t=o.quiz)||void 0===t?void 0:t.title)||`${o.title} Quiz`,de=(null===(r=o.quiz)||void 0===r?void 0:r.description)||"Test your knowledge of this chapter's content.";(0,n.useEffect)((()=>{const e=localStorage.getItem(`bookmarks-${i}-${o.id}`);e&&S(JSON.parse(e));const t=localStorage.getItem(`progress-${i}-${o.id}`);if(t){E(JSON.parse(t));const e=JSON.parse(t),r=Object.values(e).filter((e=>e)).length,n=o.sections&&Array.isArray(o.sections)?o.sections.length:0;n>0&&k(Math.round(r/n*100))}}),[i,o.id,o.sections]),(0,n.useEffect)((()=>{const e=h.get("tab");!e||"content"!==e&&"quiz"!==e||_(e)}),[h]);if(!o)return(0,oe.jsx)(l.A,{sx:{p:3},children:(0,oe.jsx)(c.A,{children:"Chapter not found"})});const ue=!o.sections||!Array.isArray(o.sections)||0===o.sections.length;return(0,oe.jsxs)(l.A,{children:[(0,oe.jsxs)(l.A,{sx:{p:3,bgcolor:"primary.main",color:"white"},children:[(0,oe.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:o.title}),(0,oe.jsx)(c.A,{variant:"subtitle1",children:o.description})]}),(0,oe.jsx)(l.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,oe.jsxs)(l.A,{sx:{display:"flex"},children:[(0,oe.jsx)(d.A,{onClick:()=>_("content"),sx:{py:2,px:3,borderBottom:"content"===M?"2px solid":"none",borderColor:"primary.main",color:"content"===M?"primary.main":"text.primary",borderRadius:0,fontWeight:"content"===M?"bold":"normal"},children:"Content"}),le&&(0,oe.jsx)(d.A,{onClick:()=>_("quiz"),sx:{py:2,px:3,borderBottom:"quiz"===M?"2px solid":"none",borderColor:"primary.main",color:"quiz"===M?"primary.main":"text.primary",borderRadius:0,fontWeight:"quiz"===M?"bold":"normal"},children:"Quiz"})]})}),(0,oe.jsx)(l.A,{sx:{p:3},children:"content"===M?(0,oe.jsxs)(oe.Fragment,{children:[ue?(0,oe.jsxs)(A.A,{elevation:0,variant:"outlined",sx:{p:3,borderRadius:2,textAlign:"center"},children:[(0,oe.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Content Coming Soon"}),(0,oe.jsx)(c.A,{variant:"body1",children:"The content for this chapter is currently being developed. Please check back later for updates."})]}):o.sections.map((e=>(0,oe.jsxs)(W.A,{expanded:x===e.id,onChange:()=>(e=>{if(p(x===e?null:e),x!==e&&!w[e]){const t={...w,[e]:!0};E(t),localStorage.setItem(`progress-${i}-${o.id}`,JSON.stringify(t));const r=Object.values(t).filter((e=>e)).length,n=o.sections&&Array.isArray(o.sections)?o.sections.length:0;n>0&&k(Math.round(r/n*100))}})(e.id),sx:{mb:2,overflow:"hidden",bgcolor:w[e.id]?"rgba(76, 175, 80, 0.04)":"transparent",position:"relative"},children:[(0,oe.jsx)(F.A,{expandIcon:(0,oe.jsx)(Y.A,{}),sx:{bgcolor:"action.hover"},children:(0,oe.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[(0,oe.jsxs)(c.A,{sx:{fontWeight:x===e.id?"bold":"normal"},children:[e.id," - ",e.title,w[e.id]&&(0,oe.jsx)(j.A,{label:"Completed",size:"small",color:"success",sx:{ml:2,height:20,fontSize:"0.6rem"}})]}),(0,oe.jsx)(d.A,{size:"small",onClick:t=>{t.stopPropagation(),(e=>{let t;b.includes(e)?(t=b.filter((t=>t!==e)),T("Bookmark removed")):(t=[...b,e],T("Bookmark added - you can access this later from your profile")),S(t),localStorage.setItem(`bookmarks-${i}-${o.id}`,JSON.stringify(t)),$(!0)})(e.id)},startIcon:b.includes(e.id)?(0,oe.jsx)(B.A,{color:"primary"}):(0,oe.jsx)(q.A,{}),sx:{ml:2},children:b.includes(e.id)?"Bookmarked":"Bookmark"})]})}),(0,oe.jsx)(O.A,{children:(0,oe.jsx)(l.A,{sx:{p:1},dangerouslySetInnerHTML:{__html:e.content}})})]},e.id))),b.length>0&&!ue&&(0,oe.jsxs)(l.A,{sx:{mt:4,mb:4},children:[(0,oe.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Your Bookmarked Sections"}),(0,oe.jsx)(A.A,{elevation:0,variant:"outlined",sx:{p:2,borderRadius:2},children:(0,oe.jsx)(R.Ay,{container:!0,spacing:2,children:b.map((e=>{const t=o.sections.find((t=>t.id===e));return t?(0,oe.jsx)(R.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,oe.jsx)(A.A,{variant:"outlined",sx:{p:2,cursor:"pointer","&:hover":{bgcolor:"rgba(0, 0, 0, 0.03)"}},onClick:()=>{p(e),setTimeout((()=>{var t;null===(t=document.getElementById(`section-${e}`))||void 0===t||t.scrollIntoView({behavior:"smooth"})}),100)},children:(0,oe.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,oe.jsx)(B.A,{color:"primary",sx:{mr:1,fontSize:"1rem"}}),(0,oe.jsx)(c.A,{variant:"body2",fontWeight:"medium",children:t.title})]})})},e):null}))})})]}),o.examples&&o.examples.length>0&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(c.A,{variant:"h5",gutterBottom:!0,sx:{mt:4,mb:2},children:"Code Examples"}),(0,oe.jsx)(R.Ay,{container:!0,spacing:3,children:o.examples.map((e=>(0,oe.jsx)(R.Ay,{item:!0,xs:12,md:6,children:(0,oe.jsxs)(A.A,{elevation:2,sx:{borderRadius:2,overflow:"hidden"},children:[(0,oe.jsxs)(l.A,{sx:{bgcolor:"primary.main",color:"primary.contrastText",p:2,display:"flex",alignItems:"center"},children:[(0,oe.jsx)(U.A,{sx:{mr:1}}),(0,oe.jsx)(c.A,{variant:"h6",children:e.title})]}),(0,oe.jsxs)(l.A,{sx:{p:2},children:[(0,oe.jsx)(c.A,{variant:"body2",paragraph:!0,children:e.description}),(0,oe.jsx)(A.A,{variant:"outlined",sx:{p:2,bgcolor:"#272822",color:"#f8f8f2",fontFamily:"monospace",whiteSpace:"pre-wrap",overflowX:"auto",fontSize:"0.875rem"},children:e.code}),(0,oe.jsx)(c.A,{variant:"subtitle2",sx:{mt:2,fontWeight:"bold"},children:"Explanation:"}),(0,oe.jsx)(c.A,{variant:"body2",children:e.explanation})]})]})},e.id)))})]}),o.videos&&o.videos.length>0&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(c.A,{variant:"h5",gutterBottom:!0,sx:{mt:4,mb:2},children:"Video Resources"}),(0,oe.jsx)(R.Ay,{container:!0,spacing:3,children:o.videos.map((e=>(0,oe.jsx)(R.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,oe.jsx)(D.A,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:(0,oe.jsx)(J.A,{component:"a",href:e.url,target:"_blank",rel:"noopener noreferrer",children:(0,oe.jsxs)(l.A,{sx:{position:"relative"},children:[(0,oe.jsx)(H.A,{component:"img",height:"140",image:e.thumbnail,alt:e.title}),(0,oe.jsx)(l.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.3)",transition:"background 0.3s","&:hover":{background:"rgba(0,0,0,0.5)"}},children:(0,oe.jsx)(X.A,{sx:{fontSize:60,color:"white"}})})]})})})},e.id)))})]})]}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(c.A,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"Chapter Quiz"}),(0,oe.jsxs)(A.A,{sx:{p:3,borderRadius:2},children:[(0,oe.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,oe.jsx)(Z.A,{sx:{mr:1,color:"primary.main"}}),(0,oe.jsx)(c.A,{variant:"h6",children:ce})]}),(0,oe.jsx)(c.A,{variant:"body2",paragraph:!0,children:de}),v&&re&&(0,oe.jsxs)(C.A,{severity:se?"success":"warning",sx:{mb:3},children:[(0,oe.jsx)(c.A,{variant:"subtitle2",children:se?"Congratulations! You passed the quiz.":"You need to review this chapter again."}),(0,oe.jsxs)(c.A,{variant:"body2",children:["Your score: ",re.toFixed(1),"%"]})]}),ae.map(((e,t)=>{var r;const n=e.id||t;return(0,oe.jsxs)(l.A,{sx:{mb:3,pb:3,borderBottom:t<ae.length-1?"1px solid #e0e0e0":"none"},children:[(0,oe.jsxs)(c.A,{variant:"subtitle1",gutterBottom:!0,children:[t+1,". ",e.question]}),(0,oe.jsx)(L.A,{component:"fieldset",sx:{ml:2},children:(0,oe.jsx)(P.A,{value:m[n]||"",onChange:e=>((e,t)=>{g((r=>({...r,[e]:t})))})(n,Number(e.target.value)),children:e.options.map(((t,r)=>{const o="object"===typeof t?t.id:r,s="object"===typeof t?t.text:t;return(0,oe.jsx)(V.A,{value:o,control:(0,oe.jsx)(Q.A,{}),label:s,disabled:v,sx:{...v&&o===e.correctAnswer&&{color:"success.main",fontWeight:"bold"},...v&&m[n]===o&&m[n]!==e.correctAnswer&&{color:"error.main"}}},o)}))})}),v&&(0,oe.jsxs)(l.A,{sx:{mt:1,ml:2},children:[m[n]===e.correctAnswer?(0,oe.jsxs)(c.A,{variant:"body2",sx:{color:"success.main",display:"flex",alignItems:"center"},children:[(0,oe.jsx)(G.A,{fontSize:"small",sx:{mr:.5}}),"Correct!"]}):(0,oe.jsxs)(c.A,{variant:"body2",sx:{color:"error.main"},children:["Incorrect. The correct answer is: ","object"===typeof e.options[e.correctAnswer]?null===(r=e.options[e.correctAnswer])||void 0===r?void 0:r.text:e.options[e.correctAnswer]]}),(0,oe.jsx)(c.A,{variant:"body2",sx:{mt:1,fontStyle:"italic"},children:e.explanation})]})]},n)})),(0,oe.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[v?(0,oe.jsx)(d.A,{variant:"outlined",onClick:()=>{g({}),f(!1),ne(0),ie(!1)},startIcon:(0,oe.jsx)(K.A,{}),children:"Retake Quiz"}):(0,oe.jsx)(d.A,{variant:"contained",onClick:()=>{let e=0,t=0;ae.length>0&&(t=ae.length,ae.forEach(((t,r)=>{const n=t.id||r;m[n]===t.correctAnswer&&e++})));const r=t>0?e/t*100:0,n=r>=70;ne(r),ie(n),f(!0),n&&((e,t,r)=>{try{const n=`quiz-${e}-${t}`;return localStorage.setItem(n,r.toString()),r>=70&&te(e,t,!0),!0}catch(n){return console.error("Error marking quiz completed:",n),!1}})(i,o.id,r),a&&a(n,r)},startIcon:(0,oe.jsx)(G.A,{}),disabled:Object.keys(m).length!==ae.length,children:"Submit Answers"}),(0,oe.jsx)(d.A,{variant:"outlined",onClick:()=>{u&&u()},endIcon:(0,oe.jsx)(ee.A,{}),children:"Next Chapter"})]})]})]})}),(0,oe.jsx)(y.A,{open:z,autoHideDuration:3e3,onClose:()=>$(!1),message:N})]})};var ie=r(62770),le=r(37709),ae=(r(18340),r(20134)),ce=r(8729);try{const e=r(87888);le.A.registerLanguage("verilog",e)}catch(ue){console.warn("Verilog highlighting not available:",ue)}const de=()=>{var e,t,r,W,F,O,R,D,J;const{moduleId:H,chapterId:L}=(0,o.g)(),P=(0,o.Zp)(),[V,Q]=(0,n.useState)(null),[Y,U]=(0,n.useState)(null),[X,Z]=(0,n.useState)(null),[G,K]=(0,n.useState)(!0),[ee,re]=(0,n.useState)(!1),[de,ue]=(0,n.useState)(!1),[he,xe]=(0,n.useState)(!1),[pe,me]=(0,n.useState)(!1),[ge,ve]=(0,n.useState)(""),[je,Ae]=(0,n.useState)("success"),[fe,be]=(0,n.useState)(null),[ye,Ce]=(0,n.useState)(!1),[Se,Ie]=(0,n.useState)(null),ke=(0,n.useContext)(ce.Ay),[we,Ee]=(0,n.useState)(!1),[ze,$e]=(0,n.useState)(!1),Be=(0,n.useRef)({}),qe=(0,n.useRef)({}),Ne=(0,n.useRef)({}),[Te,Me]=(0,n.useState)([]),[_e,We]=(0,n.useState)([]),[Fe,Oe]=(0,n.useState)(""),[Re,De]=(0,n.useState)("");(0,n.useEffect)((()=>{Be.current={},qe.current={},Ne.current={}}),[we,L]);const Je=()=>{var e;if(null===ke||void 0===ke||null===(e=ke.currentModule)||void 0===e||!e.chapters)return;let t=ke.currentChapterIndex+1;var r;ke.currentModule.chapters.length>t&&(null===(r=ke.setCurrentChapterIndex)||void 0===r||r.call(ke,t),P(`/modules/${H}/chapters/${ke.currentModule.chapters[t].chapterId}`))};(0,n.useEffect)((()=>{if(!H||!V||!V.moduleType)return;if(null===ke||void 0===ke||!ke.user)return void Ce(!1);Ce(!0);(async()=>{if(H&&V)try{var e;const r=await i.A.post(`${ie.A}/api/general/user-by-email`,{email:null===(e=ke.user.wholeData)||void 0===e?void 0:e.email});var t;if(200===r.status)"free"===V.moduleType||null!==(t=r.data.paidModule)&&void 0!==t&&t.some((e=>e.moduleId===H))||P(`/modules/${H}`)}catch(r){console.error("Error checking module access:",r)}})()}),[null===ke||void 0===ke?void 0:ke.user]),(0,n.useEffect)((()=>{G||setTimeout((()=>{document.querySelectorAll("pre code").forEach((e=>{le.A.highlightBlock(e)}))}),0)}),[G,we,X]),(0,n.useEffect)((()=>{(async()=>{try{K(!0);let r=(0,_.P)(H);if(!r)throw new Error(`Module with ID ${H} not found`);Q(r);try{const e=(await i.A.get(`${ie.A}/api/general/chapter/${L}`)).data;Z(e),Oe(e.title||""),De(e.description||""),U({id:e.id,title:e.title,moduleId:e.moduleId})}catch(e){if(console.error("Error fetching chapter content:",e),be(e.message),null!==r&&void 0!==r&&r.chapters){const e=parseInt(L,10),t=r.chapters.find((t=>t.id===e));if(!t)throw new Error(`Chapter with ID ${L} not found`);U(t),Z({id:t.id,title:t.title,description:t.description||"",sections:t.sections||[],codeExamples:t.codeExamples||[]})}}if(ye)try{const e=await i.A.get(`${ie.A}/api/user/progress/${H}`);200===e.status&&Ie(e.data)}catch(t){console.error("Error fetching progress:",t)}if(L){const e=JSON.parse(localStorage.getItem("bookmarkedChapters")||"[]").some((e=>e.moduleId===H&&e.chapterId===L));ue(e);const t=parseInt(L,10),r=ne(H,t);xe(r)}}catch(fe){console.error("Error fetching data:",fe),be(fe.message)}finally{K(!1)}})()}),[H,L,ye]);const He=()=>{re(!ee)},Le=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";ve(e),Ae(t),me(!0)},Pe=(e,t,r)=>{We((n=>n.map((n=>n.id===e?{...n,[t]:r}:n))))},Ve=()=>{Ee(!1),Me([]),We([]),Oe(""),De("")},Qe=e=>{if(!Be.current[e])return;const t=Be.current[e].innerHTML;Me((r=>r.map((r=>r.id===e?{...r,content:t}:r))))};(0,n.useEffect)((()=>{if(!we||null===X||void 0===X||!X.sections)return;const e={};return X.sections.forEach((t=>{const r=t.id;if(Be.current[r]){const t=()=>Qe(r);Be.current[r].addEventListener("input",t),e[r]=t}})),()=>{Object.entries(e).forEach((e=>{let[t,r]=e;Be.current[t]&&Be.current[t].removeEventListener("input",r)}))}}),[we,null===X||void 0===X?void 0:X.sections]);const Ye=async()=>{if(X){$e(!0);try{var e,t;const r=(null===(e=X.sections)||void 0===e?void 0:e.map((e=>{const t=Be.current[e.id],r=t?t.innerHTML:e.content||"",n=Te.find((t=>t.id===e.id)),o=(null===n||void 0===n?void 0:n.title)||e.title||"";return{...e,title:o,content:r}})))||[],n=(null===(t=X.codeExamples)||void 0===t?void 0:t.map((e=>{const t=Ne.current[`${e.id}-code`],r=t?t.textContent:e.code||"",n=_e.find((t=>t.id===e.id));return{...e,title:(null===n||void 0===n?void 0:n.title)||e.title||"",description:(null===n||void 0===n?void 0:n.description)||e.description||"",explanation:(null===n||void 0===n?void 0:n.explanation)||e.explanation||"",code:r,language:(null===n||void 0===n?void 0:n.language)||e.language||""}})))||[],o={...X,title:Fe,description:Re,sections:r,codeExamples:n};console.log("Saving updated content:",o);if(200!==(await i.A.post(`${ie.A}/api/general/update-chapter`,o,{headers:{"Content-Type":"application/json"}})).status)throw new Error("Failed to update chapter content");Z(o),Ee(!1),Le("Chapter content updated successfully!","success")}catch(fe){console.error("Error saving chapter content:",fe),Le("Failed to save changes. Please try again.","error")}finally{$e(!1)}}};if(G)return(0,oe.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,oe.jsx)(a.A,{})});if(fe||!V||!Y)return(0,oe.jsxs)(l.A,{className:"container page-container",sx:{textAlign:"center",py:8},children:[(0,oe.jsx)(c.A,{variant:"h5",children:fe||"Content not found"}),(0,oe.jsx)(d.A,{component:s.N_,to:"/modules",sx:{mt:2},children:"Back to Modules"})]});const Ue=V.chapters?V.chapters.findIndex((e=>e.id===parseInt(L,10))):-1,Xe=0===Ue,Ze=Ue===(null===(e=V.chapters)||void 0===e?void 0:e.length)-1||-1===Ue,Ge=(Xe||-1===Ue||V.chapters[Ue-1],Ze||-1===Ue||V.chapters[Ue+1],"verigeektech@gmail.com"===(null===ke||void 0===ke||null===(t=ke.user)||void 0===t?void 0:t.email));return(0,oe.jsxs)(oe.Fragment,{children:[Y&&Re&&(0,oe.jsx)(ae.A,{title:null===Y||void 0===Y?void 0:Y.title,description:Re||"",url:"verigeek.xyz"}),(0,oe.jsx)(u.Ay,{anchor:"left",open:ee,onClose:He,children:(0,oe.jsxs)(l.A,{sx:{width:300,p:2},children:[(0,oe.jsx)(c.A,{variant:"h6",sx:{mb:2},children:(null===ke||void 0===ke||null===(r=ke.currentModule)||void 0===r?void 0:r.title)||V.title}),(0,oe.jsx)(h.A,{sx:{mb:2}}),(0,oe.jsx)(x.A,{children:null===(W=V.chapters)||void 0===W?void 0:W.map((e=>{const t=e.id===parseInt(L,10),r=ne(H,e.id);return(0,oe.jsxs)(p.Ay,{button:!0,component:s.N_,to:`/modules/${H}/chapters/${e.id}`,selected:t,sx:{borderRadius:1,mb:.5,"&.Mui-selected":{bgcolor:"primary.light",color:"primary.contrastText"}},children:[r&&(0,oe.jsx)(S.A,{sx:{mr:1,fontSize:"1rem",color:"success.main"}}),(0,oe.jsx)(m.A,{primary:`${e.id}. ${e.title}`,primaryTypographyProps:{fontWeight:t?"bold":"normal",fontSize:"0.9rem"}})]},e.id)}))})]})}),(0,oe.jsxs)(l.A,{className:"container page-container",children:[(0,oe.jsxs)(l.A,{sx:{mb:3,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,oe.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,oe.jsx)(g.A,{onClick:He,sx:{mr:1},children:(0,oe.jsx)(I.A,{})}),(0,oe.jsxs)(v.A,{children:[(0,oe.jsx)(s.N_,{to:"/",style:{textDecoration:"none",color:"inherit"},children:"Home"}),(0,oe.jsx)(s.N_,{to:"/modules",style:{textDecoration:"none",color:"inherit"},children:"Modules"}),(0,oe.jsx)(s.N_,{to:`/modules/${H}`,style:{textDecoration:"none",color:"inherit"},children:null===ke||void 0===ke||null===(F=ke.currentModule)||void 0===F?void 0:F.title}),(0,oe.jsxs)(c.A,{color:"text.primary",children:["Chapter ",null===Y||void 0===Y?void 0:Y.title]})]})]}),(0,oe.jsx)(d.A,{component:s.N_,to:`/modules/${H}`,startIcon:(0,oe.jsx)(k.A,{}),children:"Back to Module"})]}),(0,oe.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[(0,oe.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,oe.jsx)(w.A,{sx:{mr:1,color:"primary.main"}}),(0,oe.jsxs)(c.A,{variant:"subtitle1",children:["Chapter ",null===Y||void 0===Y?void 0:Y.title,he&&!we&&(0,oe.jsx)(j.A,{size:"small",icon:(0,oe.jsx)(S.A,{}),label:"Completed",color:"success",sx:{ml:2}})]})]}),(0,oe.jsxs)(l.A,{sx:{display:"flex",gap:1},children:[Ge&&!we&&(0,oe.jsx)(d.A,{variant:"outlined",size:"small",startIcon:(0,oe.jsx)(E.A,{}),onClick:()=>{X&&(Ee(!0),Oe(X.title||""),De(X.description||""),X.sections?Me([...X.sections]):Me([]),X.codeExamples?We([...X.codeExamples]):We([]))},children:"Edit Content"}),we&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(d.A,{variant:"outlined",size:"small",color:"error",startIcon:(0,oe.jsx)(z.A,{}),onClick:Ve,children:"Cancel Editing"}),(0,oe.jsx)(d.A,{variant:"contained",size:"small",color:"primary",startIcon:(0,oe.jsx)($.A,{}),onClick:Ye,disabled:ze,children:ze?"Saving...":"Save Changes"})]}),!we&&(0,oe.jsxs)(oe.Fragment,{children:[!he&&(0,oe.jsx)(d.A,{variant:"outlined",size:"small",startIcon:(0,oe.jsx)(S.A,{}),onClick:()=>{if(!V||!Y)return;const e=parseInt(L,10);te(H,e,!0),xe(!0),Le("Chapter marked as completed!","success")},children:"Mark as Completed"}),(0,oe.jsx)(d.A,{variant:"outlined",size:"small",startIcon:de?(0,oe.jsx)(B.A,{}):(0,oe.jsx)(q.A,{}),onClick:()=>{if(!V||!Y)return;const e=JSON.parse(localStorage.getItem("bookmarkedChapters")||"[]"),t={moduleId:H,chapterId:L.toString(),moduleTitle:V.title,chapterTitle:Y.title,timestamp:(new Date).toISOString()};if(de){const t=e.filter((e=>!(e.moduleId===H&&e.chapterId===L.toString())));localStorage.setItem("bookmarkedChapters",JSON.stringify(t)),ue(!1),Le("Chapter bookmark removed","info")}else e.push(t),localStorage.setItem("bookmarkedChapters",JSON.stringify(e)),ue(!0),Le("Chapter bookmarked successfully! Access it anytime from your profile.","success")},children:de?"Bookmarked":"Bookmark"})]})]})]}),(0,oe.jsxs)(A.A,{elevation:0,sx:{borderRadius:2,overflow:"hidden",mb:4},children:[(0,oe.jsxs)(l.A,{sx:{p:4,pb:2},children:[we?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(f.A,{fullWidth:!0,label:"Chapter Title",variant:"outlined",value:Fe,onChange:e=>Oe(e.target.value),sx:{mb:2},InputProps:{startAdornment:(0,oe.jsx)(b.A,{position:"start",children:(0,oe.jsx)(N.A,{})})}}),(0,oe.jsx)(f.A,{fullWidth:!0,label:"Chapter Description",variant:"outlined",value:Re,onChange:e=>De(e.target.value),multiline:!0,rows:2,sx:{mb:2}})]}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:(null===X||void 0===X?void 0:X.title)||Y.title||""}),(0,oe.jsx)(c.A,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:(null===X||void 0===X?void 0:X.description)||""})]}),(null===X||void 0===X?void 0:X.estimatedTime)&&(0,oe.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Estimated time: ",X.estimatedTime]})]}),null===X||void 0===X||null===(O=X.sections)||void 0===O?void 0:O.map((e=>(0,oe.jsxs)(l.A,{sx:{p:4},children:[we?(0,oe.jsx)(f.A,{fullWidth:!0,label:"Section Title",variant:"outlined",defaultValue:e.title||"",onChange:t=>{return r=e.id,n=t.target.value,void Me((e=>e.map((e=>e.id===r?{...e,title:n}:e))));var r,n},inputRef:t=>qe.current[e.id]=t,sx:{mb:2}}):(0,oe.jsx)(c.A,{variant:"h5",gutterBottom:!0,sx:{mt:2},children:e.title||"Untitled Section"}),(0,oe.jsx)("div",{contentEditable:we,className:`prose prose-sm max-w-none bg-white p-4 border ${we?"border-blue-500":"border-gray-200"} rounded text-[1.2rem]`,dangerouslySetInnerHTML:{__html:e.content||""},ref:t=>Be.current[e.id]=t,suppressContentEditableWarning:!0,onBlur:()=>we&&Qe(e.id)})]},e.id))),(null===X||void 0===X||null===(R=X.codeExamples)||void 0===R?void 0:R.length)>0&&(0,oe.jsxs)(l.A,{sx:{p:4},children:[(0,oe.jsx)(c.A,{variant:"h5",gutterBottom:!0,sx:{mt:2},children:"Code Examples"}),X.codeExamples.map((e=>(0,oe.jsxs)(l.A,{sx:{mb:4},children:[we?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(f.A,{fullWidth:!0,label:"Example Title",variant:"outlined",defaultValue:e.title||"",onChange:t=>Pe(e.id,"title",t.target.value),sx:{mb:2}}),(0,oe.jsx)(f.A,{fullWidth:!0,label:"Example Description",variant:"outlined",defaultValue:e.description||"",onChange:t=>Pe(e.id,"description",t.target.value),multiline:!0,rows:2,sx:{mb:2}})]}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:e.title||"Untitled Example"}),(0,oe.jsx)(c.A,{variant:"body2",gutterBottom:!0,children:e.description||""})]}),(0,oe.jsx)("pre",{className:"bg-gray-100 p-4 rounded overflow-auto "+(we?"border-2 border-blue-500":""),children:(0,oe.jsx)("code",{className:e.language||"",contentEditable:we,suppressContentEditableWarning:!0,ref:t=>Ne.current[`${e.id}-code`]=t,children:e.code||""})}),e.explanation&&(we?(0,oe.jsx)(f.A,{fullWidth:!0,label:"Example Explanation",variant:"outlined",defaultValue:e.explanation,onChange:t=>Pe(e.id,"explanation",t.target.value),multiline:!0,rows:3,sx:{mt:2}}):(0,oe.jsx)(c.A,{variant:"body2",sx:{mt:2},children:e.explanation}))]},e.id)))]}),(!X||!(null!==(D=X.sections)&&void 0!==D&&D.length)&&!(null!==(J=X.codeExamples)&&void 0!==J&&J.length))&&(0,oe.jsx)(se,{chapter:Y,moduleId:H,onQuizCompletion:e=>{e?(xe(!0),Le("Congratulations! You passed the quiz and completed this chapter.","success")):Le("You need to score at least 70% to complete this chapter.","warning")},onNextChapter:Je})]}),we&&(0,oe.jsxs)(l.A,{sx:{position:"fixed",bottom:30,right:30,zIndex:1e3,display:"flex",gap:2},children:[(0,oe.jsx)(d.A,{variant:"contained",color:"error",startIcon:(0,oe.jsx)(z.A,{}),onClick:Ve,children:"Cancel"}),(0,oe.jsx)(d.A,{variant:"contained",color:"primary",startIcon:(0,oe.jsx)($.A,{}),onClick:Ye,disabled:ze,children:ze?"Saving...":"Save Changes"})]}),(0,oe.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:4},children:[(0,oe.jsx)(d.A,{variant:"outlined",startIcon:(0,oe.jsx)(T.A,{}),onClick:()=>{var e;if(null===ke||void 0===ke||null===(e=ke.currentModule)||void 0===e||!e.chapters)return;let t=ke.currentChapterIndex-1;var r;t>=0&&(null===(r=ke.setCurrentChapterIndex)||void 0===r||r.call(ke,t),P(`/modules/${H}/chapters/${ke.currentModule.chapters[t].chapterId}`))},children:"Previous Chapter"}),(0,oe.jsx)(d.A,{variant:"contained",endIcon:(0,oe.jsx)(M.A,{}),onClick:Je,children:"Next Chapter"})]}),(0,oe.jsx)(y.A,{open:pe,autoHideDuration:6e3,onClose:()=>me(!1),children:(0,oe.jsx)(C.A,{onClose:()=>me(!1),severity:je,children:ge})})]})]})}}}]);
//# sourceMappingURL=542.78572de3.chunk.js.map