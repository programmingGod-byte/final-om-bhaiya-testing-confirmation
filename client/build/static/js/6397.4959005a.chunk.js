"use strict";(self.webpackChunkverilog_learning_platform_client=self.webpackChunkverilog_learning_platform_client||[]).push([[6397],{18340:()=>{},51238:(e,t,o)=>{var n;o.d(t,{A:()=>u});var l=new Uint8Array(16);function s(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(l)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const r=function(e){return"string"===typeof e&&a.test(e)};for(var c=[],i=0;i<256;++i)c.push((i+256).toString(16).substr(1));const d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!r(o))throw TypeError("Stringified UUID is invalid");return o};const u=function(e,t,o){var n=(e=e||{}).random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){o=o||0;for(var l=0;l<16;++l)t[o+l]=n[l];return t}return d(n)}},96397:(e,t,o)=>{o.r(t),o.d(t,{default:()=>g});var n=o(65043),l=o(31517),s=o(80726),a=o.n(s),r=o(51238),c=o(86213),i=o(73216),d=o(62770),u=o(37709),m=(o(18340),o(8729)),p=o(70579);u.A.registerLanguage("verilog",o(87888));const g=()=>{const e=(0,i.Zp)(),t=(0,n.useContext)(m.Ay);(0,n.useEffect)((()=>{t.user&&"verigeektech@gmail.com"!=t.user.email&&e("/")}),[t.user]);const[o,s]=(0,n.useState)([]),g=(0,i.Zp)(),[x,h]=(0,n.useState)(""),[b,f]=(0,n.useState)({id:(0,r.A)(),title:"",description:"",estimatedTime:"",completed:!1,sections:[{id:(0,r.A)(),title:"",content:"",contentBlocks:[]}],codeExamples:[{id:(0,r.A)(),title:"",description:"",code:"",explanation:""}]});(0,n.useEffect)((()=>{c.A.post(`${d.A}/api/modules/get-modules`).then((e=>{e.data.success&&s(e.data.modules)})).catch((e=>{console.error("Failed to fetch modules:",e)}))}),[]),(0,n.useEffect)((()=>{document.querySelectorAll("pre code").forEach((e=>{u.A.highlightBlock(e)}))}));const v=(e,t,o)=>{const n=[...b.sections];n[e][t]=o,f({...b,sections:n})},y=(e,t,o)=>{const n=[...b.codeExamples];n[e][t]=o,f({...b,codeExamples:n})},j={toolbar:["heading","|","fontFamily","fontSize","|","bold","italic","underline","strikethrough","|","link","bulletedList","numberedList","|","blockQuote","insertTable","codeBlock","|","undo","redo"],codeBlock:{languages:[{language:"plaintext",label:"Plain text"},{language:"javascript",label:"JavaScript"},{language:"python",label:"Python"},{language:"verilog",label:"Verilog"},{language:"html",label:"HTML"},{language:"css",label:"CSS"}]},image:{insert:{integrations:["insertImageViaUrl"]},toolbar:["imageTextAlternative","imageStyle:full","imageStyle:side"]},removePlugins:["ImageUpload","EasyImage"]},C=e=>{let t=e.content||"";return e.contentBlocks&&e.contentBlocks.length>0&&e.contentBlocks.forEach((e=>{"content"===e.type?t+=e.content||"":"code"===e.type&&(t+=`\n            <pre><code class="language-${e.language}">\n${e.code}\n            </code></pre>\n          `)})),t};return(0,p.jsxs)("div",{className:"max-w-5xl mx-auto p-6 bg-white shadow-xl rounded-lg",children:[(0,p.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Add Chapter to Module"}),(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsx)("label",{className:"block text-gray-600 mb-2 font-semibold",children:"Select Module"}),(0,p.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",children:[(0,p.jsx)("option",{value:"",children:"-- Select a Module --"}),o.map((e=>(0,p.jsxs)("option",{value:e.id,children:[e.title," \u2013 ",e.description.split(" ").slice(0,20).join(" "),e.description.split(" ").length>50?"...":""]},e.id)))]})]}),x&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{type:"text",placeholder:"Chapter Title",value:b.title,onChange:e=>f({...b,title:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg mb-4"}),(0,p.jsx)("textarea",{placeholder:"Chapter Description",value:b.description,onChange:e=>f({...b,description:e.target.value}),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg mb-4"}),(0,p.jsx)("input",{type:"text",placeholder:"Estimated Time (e.g., 1 hour)",value:b.estimatedTime,onChange:e=>f({...b,estimatedTime:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg mb-6"}),b.sections.map(((e,t)=>(0,p.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-5 mb-6",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,p.jsxs)("h2",{className:"text-xl font-semibold text-gray-700",children:["Section ",t+1]}),b.sections.length>1&&(0,p.jsx)("button",{onClick:()=>(e=>{const t=b.sections.filter(((t,o)=>o!==e));f({...b,sections:t})})(t),className:"text-red-500 hover:underline text-sm",children:"Delete"})]}),(0,p.jsx)("input",{type:"text",placeholder:"Section Title",value:e.title,onChange:e=>v(t,"title",e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg mb-4"}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("h3",{className:"text-md font-medium text-gray-600 mb-2",children:"Main Content"}),(0,p.jsx)(l.aF,{editor:a(),data:e.content||"",onChange:(e,o)=>((e,t,o)=>{const n=o.getData();v(e,"content",n)})(t,0,o),config:j})]}),e.contentBlocks&&e.contentBlocks.map(((e,o)=>(0,p.jsxs)("div",{className:"mt-4 mb-4 bg-white p-4 border border-gray-200 rounded",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,p.jsx)("h4",{className:"text-md font-medium text-gray-600",children:"content"===e.type?"Additional Content":"Code Block"}),(0,p.jsx)("button",{onClick:()=>((e,t)=>{const o=[...b.sections];o[e].contentBlocks.splice(t,1),f({...b,sections:o})})(t,o),className:"text-red-500 hover:underline text-sm",children:"Delete"})]}),"content"===e.type?(0,p.jsx)(l.aF,{editor:a(),data:e.content||"",onChange:(e,n)=>((e,t,o,n)=>{const l=n.getData(),s=[...b.sections];s[e].contentBlocks[t].content=l,f({...b,sections:s})})(t,o,0,n),config:j}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsxs)("select",{value:e.language||"javascript",onChange:e=>((e,t,o)=>{const n=[...b.sections];n[e].contentBlocks[t].language=o,f({...b,sections:n})})(t,o,e.target.value),className:"border border-gray-300 rounded p-1",children:[(0,p.jsx)("option",{value:"javascript",children:"JavaScript"}),(0,p.jsx)("option",{value:"python",children:"Python"}),(0,p.jsx)("option",{value:"verilog",children:"Verilog"}),(0,p.jsx)("option",{value:"html",children:"HTML"}),(0,p.jsx)("option",{value:"css",children:"CSS"}),(0,p.jsx)("option",{value:"plaintext",children:"Plain Text"})]})}),(0,p.jsx)("textarea",{value:e.code||"",onChange:e=>((e,t,o)=>{const n=[...b.sections];n[e].contentBlocks[t].code=o,f({...b,sections:n})})(t,o,e.target.value),className:"w-full p-2 font-mono text-sm border border-gray-300 rounded-lg bg-gray-50",rows:6,placeholder:"Enter code here..."})]})]},e.id))),(0,p.jsxs)("div",{className:"flex gap-2 mt-3 mb-3",children:[(0,p.jsx)("button",{onClick:()=>(e=>{const t=[...b.sections];t[e].contentBlocks||(t[e].contentBlocks=[]),t[e].contentBlocks.push({id:(0,r.A)(),type:"content",content:""}),f({...b,sections:t})})(t),className:"bg-green-50 text-green-600 font-medium px-3 py-1 rounded-md border border-green-200 hover:bg-green-100",children:"+ Add More Content"}),(0,p.jsx)("button",{onClick:()=>(e=>{const t=[...b.sections];t[e].contentBlocks||(t[e].contentBlocks=[]),t[e].contentBlocks.push({id:(0,r.A)(),type:"code",language:"javascript",code:""}),f({...b,sections:t})})(t),className:"bg-purple-50 text-purple-600 font-medium px-3 py-1 rounded-md border border-purple-200 hover:bg-purple-100",children:"+ Add Code"})]}),(e.content||e.contentBlocks&&e.contentBlocks.length>0)&&(0,p.jsxs)("div",{className:"mt-6",children:[(0,p.jsx)("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Preview:"}),(0,p.jsx)("div",{className:"prose prose-sm max-w-none bg-white p-4 border border-gray-200 rounded  text-[1.2rem]",dangerouslySetInnerHTML:{__html:C(e)}})]})]},e.id))),(0,p.jsx)("div",{className:"flex items-center mb-8",children:(0,p.jsx)("button",{onClick:()=>{f({...b,sections:[...b.sections,{id:(0,r.A)(),title:"",content:"",contentBlocks:[]}]})},className:"bg-blue-50 text-blue-600 font-medium px-4 py-2 rounded-lg border border-blue-200 hover:bg-blue-100",children:"+ Add Section"})}),(0,p.jsxs)("div",{className:"mt-8",children:[(0,p.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"Code Examples (For Chapter)"}),b.codeExamples.map(((e,t)=>(0,p.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-white shadow",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,p.jsxs)("h4",{className:"text-md font-semibold",children:["Example ",t+1]}),(0,p.jsx)("button",{onClick:()=>(e=>{const t=b.codeExamples.filter(((t,o)=>o!==e));f({...b,codeExamples:t})})(t),className:"text-sm text-red-500 hover:underline",children:"Delete"})]}),(0,p.jsx)("input",{type:"text",placeholder:"Title",value:e.title,onChange:e=>y(t,"title",e.target.value),className:"w-full p-2 mb-2 border rounded"}),(0,p.jsx)("textarea",{placeholder:"Description",value:e.description,onChange:e=>y(t,"description",e.target.value),rows:2,className:"w-full p-2 mb-2 border rounded"}),(0,p.jsx)("textarea",{placeholder:"Code",value:e.code,onChange:e=>y(t,"code",e.target.value),rows:4,className:"w-full p-2 font-mono text-sm mb-2 border rounded bg-gray-100"}),(0,p.jsx)("textarea",{placeholder:"Explanation",value:e.explanation,onChange:e=>y(t,"explanation",e.target.value),rows:2,className:"w-full p-2 mb-2 border rounded"})]},e.id))),(0,p.jsx)("button",{onClick:()=>{const e=[...b.codeExamples,{id:(0,r.A)(),title:"",description:"",code:"",explanation:""}];f({...b,codeExamples:e})},className:"text-sm text-blue-600 border border-blue-200 px-3 py-1 rounded hover:bg-blue-50",children:"+ Add Code Example"})]}),(0,p.jsx)("div",{className:"flex justify-end mt-8",children:(0,p.jsx)("button",{onClick:async()=>{if(!x)return alert("Please select a module first!");const e=JSON.parse(JSON.stringify(b));e.sections=e.sections.map((e=>{let t=e.content||"";return e.contentBlocks&&e.contentBlocks.length>0&&e.contentBlocks.forEach((e=>{"content"===e.type?t+=e.content||"":"code"===e.type&&(t+=`\n              <pre><code class="language-${e.language}">\n  ${e.code}\n              </code></pre>\n            `)})),{id:e.id,title:e.title,content:t}}));const t={moduleId:x,id:e.id,title:e.title,description:e.description,estimatedTime:e.estimatedTime,completed:e.completed,codeExamples:e.codeExamples,sections:e.sections};try{console.log("Sending payload:",t);await c.A.post(`${d.A}/api/modules/upload-chapter`,t,{headers:{"Content-Type":"application/json"}});alert("Chapter uploaded successfully"),g("/ckeditor")}catch(s){var o,n,l;console.log(s),null!==s&&void 0!==s&&null!==(o=s.response)&&void 0!==o&&null!==(n=o.data)&&void 0!==n&&null!==(l=n.error)&&void 0!==l&&l.message?alert(s.response.data.error.message):alert(s)}},className:"bg-blue-600 text-white px-5 py-2 rounded-lg font-semibold hover:bg-blue-700",children:"Upload Chapter as JSON"})})]})]})}}}]);
//# sourceMappingURL=6397.4959005a.chunk.js.map